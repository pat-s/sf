<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>7. Spherical geometry in sf using s2geometry • sf</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="7. Spherical geometry in sf using s2geometry">
<meta property="og:description" content="sf">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sf</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9-6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/sf1.html">1. Simple Features for R</a>
    </li>
    <li>
      <a href="../articles/sf2.html">2. Reading, Writing and Converting Simple Features</a>
    </li>
    <li>
      <a href="../articles/sf3.html">3. Manipulating Simple Feature Geometries</a>
    </li>
    <li>
      <a href="../articles/sf4.html">4. Manipulating Simple Features</a>
    </li>
    <li>
      <a href="../articles/sf5.html">5. Plotting Simple Features</a>
    </li>
    <li>
      <a href="../articles/sf6.html">6. Miscellaneous</a>
    </li>
    <li>
      <a href="../articles/sf7.html">7. Spherical geometry in sf using s2geometry</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-spatial/sf/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="sf7_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>7. Spherical geometry in sf using s2geometry</h1>
                        <h4 class="author">Edzer Pebesma and Dewey Dunnington</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-spatial/sf/blob/master/vignettes/sf7.Rmd"><code>vignettes/sf7.Rmd</code></a></small>
      <div class="hidden name"><code>sf7.Rmd</code></div>

    </div>

    
    
<p>This vignette describes what spherical geometry implies, and how package <code>sf</code> uses the s2geometry library (<a href="https://s2geometry.io" class="uri">https://s2geometry.io</a>) for geometrical measures, predicates and transformations.</p>
<p>Spatial coordinates either refer to <em>projected</em> (or Cartesian) coordinates, meaning that they are associated to points on a flat space, or to unprojected or <em>geographic</em> coordinates, when they refer to angles (latitude, longitude) pointing to locations on a sphere (or ellipsoid). The flat space is also referred to as R2, the sphere as S2.</p>
<p>Package <code>sf</code> implements <em>simple features</em>, a standard for point, line, and polygon geometries where geometries are built from points (nodes) connected by straight lines (edges). The simple feature standard does not say much about its suitability for dealing with geographic coordinates, but the topological relational system it builds upon (<a href="https://en.wikipedia.org/wiki/DE-9IM">DE9-IM</a>) refer to R2, the two-dimensional flat space.</p>
<p>Yet, more and more data are routinely served or exchanged using geographic coordinates. Using software that assumes an R2, flat space may work for some problems, and although <code>sf</code> up to version 0.9-x had some functions in place for spherical/ellipsoidal computations (from package <code>lwgeom</code>, for computing area, length, distance, and for segmentizing), it has also happily warned the user that it is doing R2, flat computations with such coordinates with messages like</p>
<pre><code>although coordinates are longitude/latitude, st_intersects assumes that they are planar</code></pre>
<p>hinting to the responsibility of the user to take care of potential problems. Doing this however leaves ambiguities, e.g. whether <code>LINESTRING(-179 0,179 0)</code></p>
<ul>
<li>passes through <code>POINT(0 0)</code>, or</li>
<li>passes through <code>POINT(180 0)</code>
</li>
</ul>
<p>and whether it is * a straight line, cutting through the Earth’s surface, or * a curved line following the Earth’s surface</p>
<p>Starting with <code>sf</code> version 1.0, <code>sf</code> uses the new package <code>s2</code> (Dunnington, Pebesma, Rubak 2020) for spherical geometry, which has functions for computing pretty much all measures, predicates and transformations <em>on the sphere</em>. This means:</p>
<ul>
<li>no more hodge-podge of some functions working on R2, with annoying messages, some on the ellipsoid</li>
<li>a considerable speed increase for some functions</li>
<li>no computations on the ellipsoid (which are considered more accurate, but are also slower)</li>
</ul>
<p>The <code>s2</code> package is really a wrapper around the C++ <a href="https://s2geometry.io">s2geometry</a> library which was written by Google, and which is used in many of its products (e.g. Google Maps, Google Earth Engine, Bigquery GIS) and has been translated in several programming other languages.</p>
<div id="fundamental-differences" class="section level1">
<h1 class="hasAnchor">
<a href="#fundamental-differences" class="anchor"></a>Fundamental differences</h1>
<p>Compared to geometry on R2, and DE9-IM, the <code>s2</code> package brings a few fundamentally new concepts, which are discussed first.</p>
<div id="polygons-on-s2-divide-the-sphere-in-two-parts" class="section level2">
<h2 class="hasAnchor">
<a href="#polygons-on-s2-divide-the-sphere-in-two-parts" class="anchor"></a>Polygons on S2 divide the sphere in two parts</h2>
<p>On the sphere (S2), any polygon defines two areas; when following the exterior ring, we need to define what is inside, and the definition is <em>the left side of the enclosing edges</em>. This also means that we can flip a polygon (by inverting the edge order) to obtain the other part of the globe, and that in addition to an empty polygon (the empty set) we can have the full polygon (the entire globe).</p>
<p>Simple feature geometries should obey a ring direction too: exterior rings should be counter clockwise, interior (hole) rings should be clockwise, but in some sense this is obsolete as the difference between exterior ring and interior rings is defined by their position (exterior, followed by zero or more interior). <code><a href="../reference/st_read.html">sf::read_sf</a></code> has an argument <code>check_ring_dir</code> that checks, and corrects, ring directions and many (legacy) datasets have wrong ring directions. With wrong ring directions, many things still work.</p>
<p>For S2, ring direction is essential. For that reason, <code>st_as_s2</code> has an argument <code>oriented = FALSE</code>, which will check and correct ring directions, assuming that all exterior rings occupy an area smaller than half the globe:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">sf</span>)
<span class="no">nc</span> <span class="kw">=</span> <span class="fu"><a href="../reference/st_read.html">read_sf</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"gpkg/nc.gpkg"</span>, <span class="kw">package</span><span class="kw">=</span><span class="st">"sf"</span>)) <span class="co"># wrong ring directions</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">s2</span>)
<span class="fu"><a href="https://rdrr.io/pkg/s2/man/s2_is_collection.html">s2_area</a></span>(<span class="fu"><a href="../reference/s2.html">st_as_s2</a></span>(<span class="no">nc</span>, <span class="kw">oriented</span> <span class="kw">=</span> <span class="fl">FALSE</span>)[<span class="fl">1</span>:<span class="fl">3</span>]) <span class="co"># corrects ring direction, correct area:</span>
<span class="fu"><a href="https://rdrr.io/pkg/s2/man/s2_is_collection.html">s2_area</a></span>(<span class="fu"><a href="../reference/s2.html">st_as_s2</a></span>(<span class="no">nc</span>, <span class="kw">oriented</span> <span class="kw">=</span> <span class="fl">TRUE</span>)[<span class="fl">1</span>:<span class="fl">3</span>]) <span class="co"># wrong direction: Earth's surface minus area</span>
<span class="no">nc</span> <span class="kw">=</span> <span class="fu"><a href="../reference/st_read.html">read_sf</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"gpkg/nc.gpkg"</span>, <span class="kw">package</span><span class="kw">=</span><span class="st">"sf"</span>), <span class="kw">check_ring_dir</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="fu"><a href="https://rdrr.io/pkg/s2/man/s2_is_collection.html">s2_area</a></span>(<span class="fu"><a href="../reference/s2.html">st_as_s2</a></span>(<span class="no">nc</span>, <span class="kw">oriented</span> <span class="kw">=</span> <span class="fl">TRUE</span>)[<span class="fl">1</span>:<span class="fl">3</span>]) <span class="co"># no second correction needed here:</span></pre></body></html></div>
<p>Here is an example where the oceans are computed as the difference from the full polygon,</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/pkg/s2/man/as_s2_geography.html">as_s2_geography</a></span>(<span class="fl">TRUE</span>)</pre></body></html></div>
<p>and the countries, and shown in an orthographic projection:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">co</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/s2/man/s2_data_tbl_countries.html">s2_data_countries</a></span>()
<span class="no">oc</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/s2/man/s2_boundary.html">s2_difference</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/s2/man/as_s2_geography.html">as_s2_geography</a></span>(<span class="fl">TRUE</span>), <span class="fu"><a href="https://rdrr.io/pkg/s2/man/s2_boundary.html">s2_union_agg</a></span>(<span class="no">co</span>)) <span class="co"># oceans</span>
<span class="no">b</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/s2/man/s2_boundary.html">s2_buffer_cells</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/s2/man/as_s2_geography.html">as_s2_geography</a></span>(<span class="st">"POINT(-30 52)"</span>), <span class="fl">9800000</span>) <span class="co"># visible half</span>
<span class="no">i</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/s2/man/s2_boundary.html">s2_intersection</a></span>(<span class="no">b</span>, <span class="no">oc</span>) <span class="co"># visible ocean</span>
<span class="fu"><a href="../reference/plot.html">plot</a></span>(<span class="fu"><a href="../reference/st_transform.html">st_transform</a></span>(<span class="fu"><a href="../reference/st_as_sfc.html">st_as_sfc</a></span>(<span class="no">i</span>), <span class="st">"+proj=ortho +lat_0=52 +lon_0=-30"</span>), <span class="kw">col</span> <span class="kw">=</span> <span class="st">'blue'</span>)</pre></body></html></div>
</div>
<div id="half-closed-polygon-boundaries" class="section level2">
<h2 class="hasAnchor">
<a href="#half-closed-polygon-boundaries" class="anchor"></a>Half-closed polygon boundaries</h2>
<p>Polygons in <code>s2geometry</code> can be * CLOSED: they contain their boundaries, and a point on the boundary intersects with the polygon * OPEN: they do not contain their boundaries, points on the boundary do not intersect with the polygon * SEMI-OPEN: they contain part of their boundaries, but no boundary of non-overlapping polygons is contained by more than one polygon.</p>
<p>In principle the DE9-IM model deals with interior, boundary and exterior, and intersection predicates are sensitive to this (the difference between <em>contains</em> and <em>covers</em> is all about boundaries). DE9-IM however cannot uniquely assign points to polygons when polygons form a polygon <em>coverage</em> (no overlaps, but mostly common boundaries). This means that if we would count points by polygon, and some points fall <em>on</em> shared polygon boundaries, we either miss them (<em>contains</em>) or we count them double (<em>covers</em>); this leads to bias or need for post-processing. Using SEMI-OPEN non-overlapping polygons guarantees that every point is assigned to <em>maximally</em> one polygon in an intersection. This corresponds to e.g. how this would be handled in a grid (raster) coverage, where every grid cell (typically) only contains its upper-left corner and its upper and left sides.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">a</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/s2/man/as_s2_geography.html">as_s2_geography</a></span>(<span class="st">"POINT(0 0)"</span>)
<span class="no">b</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/s2/man/as_s2_geography.html">as_s2_geography</a></span>(<span class="st">"POLYGON((0 0,1 0,1 1,0 1,0 0))"</span>)
<span class="fu"><a href="https://rdrr.io/pkg/s2/man/s2_contains.html">s2_intersects</a></span>(<span class="no">a</span>, <span class="no">b</span>, <span class="fu"><a href="https://rdrr.io/pkg/s2/man/s2_options.html">s2_options</a></span>(<span class="kw">model</span> <span class="kw">=</span> <span class="st">"open"</span>))
<span class="fu"><a href="https://rdrr.io/pkg/s2/man/s2_contains.html">s2_intersects</a></span>(<span class="no">a</span>, <span class="no">b</span>, <span class="fu"><a href="https://rdrr.io/pkg/s2/man/s2_options.html">s2_options</a></span>(<span class="kw">model</span> <span class="kw">=</span> <span class="st">"closed"</span>))
<span class="fu"><a href="https://rdrr.io/pkg/s2/man/s2_contains.html">s2_intersects</a></span>(<span class="no">a</span>, <span class="no">b</span>, <span class="fu"><a href="https://rdrr.io/pkg/s2/man/s2_options.html">s2_options</a></span>(<span class="kw">model</span> <span class="kw">=</span> <span class="st">"semi-open"</span>)) <span class="co"># a toss</span>
<span class="fu"><a href="https://rdrr.io/pkg/s2/man/s2_contains.html">s2_intersects</a></span>(<span class="no">a</span>, <span class="no">b</span>) <span class="co"># default: semi-open</span></pre></body></html></div>
</div>
<div id="cap-enclosing-rectangle" class="section level2">
<h2 class="hasAnchor">
<a href="#cap-enclosing-rectangle" class="anchor"></a>Cap, enclosing rectangle</h2>
<p>Computing the minimum and maximum values over coordinate ranges, as <code>sf</code> does with <code><a href="../reference/st_bbox.html">st_bbox()</a></code>, is of limited value for spherical coordinates because</p>
<ul>
<li>small regions covering the antimeridian end up with a huge longitude range</li>
<li>regions including a pole will end up with a latitude range not extending to +/- 90</li>
</ul>
<p>S2 has two alternatives: the cap and the <code>lat_lng_rect</code>:</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">fiji</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/s2/man/s2_data_tbl_countries.html">s2_data_countries</a></span>(<span class="st">"Fiji"</span>)
<span class="no">aa</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/s2/man/s2_data_tbl_countries.html">s2_data_countries</a></span>(<span class="st">"Antarctica"</span>)
<span class="fu"><a href="https://rdrr.io/pkg/s2/man/s2_bounds_cap.html">s2_bounds_cap</a></span>(<span class="no">fiji</span>)
<span class="fu"><a href="https://rdrr.io/pkg/s2/man/s2_bounds_cap.html">s2_bounds_rect</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="no">fiji</span>,<span class="no">aa</span>))</pre></body></html></div>
<p>The cap reports a bounding cap (circle) as a mid point (lat, lng) and an angle around this point. The rect reports the <code>_lo</code> and <code>_hi</code> bounds of <code>lat</code> and <code>lng</code>, as well as its center (<code>_cnt</code>) values. Note that for Fiji, <code>lng_lo</code> being higher than <code>lng_hi</code> indicates that the region covers (crosses) the antimeridian; the <code>lng_cnt</code> values is not the mean of <code>lng_lo</code> and <code>lng_hi</code>.</p>
</div>
</div>
<div id="switching-between-s2-and-geos" class="section level1">
<h1 class="hasAnchor">
<a href="#switching-between-s2-and-geos" class="anchor"></a>Switching between S2 and GEOS</h1>
<p>The two-dimensional R2 library that was formerly used by <code>sf</code> is <a href="https://trac.osgeo.org/geos/">GEOS</a>, and <code>sf</code> can be instrumented to use GEOS or <code>sf</code>. First we will ask if <code>s2</code> is being used by default:</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="fu"><a href="../reference/s2.html">sf_use_s2</a></span>()</pre></body></html></div>
<p>then we can switch it of (and use GEOS) by</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="fu"><a href="../reference/s2.html">sf_use_s2</a></span>(<span class="fl">FALSE</span>)</pre></body></html></div>
<p>and switch it on (and use S2) by</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="../reference/s2.html">sf_use_s2</a></span>(<span class="fl">TRUE</span>)</pre></body></html></div>
</div>
<div id="measures" class="section level1">
<h1 class="hasAnchor">
<a href="#measures" class="anchor"></a>Measures</h1>
<div id="area" class="section level2">
<h2 class="hasAnchor">
<a href="#area" class="anchor"></a>Area</h2>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">sf</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">units</span>)
<span class="no">nc</span> <span class="kw">=</span> <span class="fu"><a href="../reference/st_read.html">read_sf</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"gpkg/nc.gpkg"</span>, <span class="kw">package</span><span class="kw">=</span><span class="st">"sf"</span>))
<span class="fu"><a href="../reference/s2.html">sf_use_s2</a></span>(<span class="fl">TRUE</span>)
<span class="no">a1</span> <span class="kw">=</span> <span class="fu"><a href="../reference/geos_measures.html">st_area</a></span>(<span class="no">nc</span>)
<span class="fu"><a href="../reference/s2.html">sf_use_s2</a></span>(<span class="fl">FALSE</span>)
<span class="no">a2</span> <span class="kw">=</span> <span class="fu"><a href="../reference/geos_measures.html">st_area</a></span>(<span class="no">nc</span>)
<span class="fu"><a href="../reference/plot.html">plot</a></span>(<span class="no">a1</span>, <span class="no">a2</span>)
<span class="fu"><a href="https://rdrr.io/r/graphics/abline.html">abline</a></span>(<span class="fl">0</span>, <span class="fl">1</span>)
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>((<span class="no">a1</span> - <span class="no">a2</span>)/<span class="no">a1</span>)</pre></body></html></div>
</div>
<div id="length" class="section level2">
<h2 class="hasAnchor">
<a href="#length" class="anchor"></a>Length</h2>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="no">nc_ls</span> <span class="kw">=</span> <span class="fu"><a href="../reference/st_cast.html">st_cast</a></span>(<span class="no">nc</span>, <span class="st">"MULTILINESTRING"</span>)
<span class="no">l1</span> <span class="kw">=</span> <span class="fu"><a href="../reference/geos_measures.html">st_length</a></span>(<span class="no">nc_ls</span>)
<span class="no">l2</span> <span class="kw">=</span> <span class="fu"><a href="../reference/geos_measures.html">st_length</a></span>(<span class="no">nc_ls</span>, <span class="kw">use_lwgeom</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="fu"><a href="../reference/plot.html">plot</a></span>(<span class="no">l1</span> , <span class="no">l2</span>)
<span class="fu"><a href="https://rdrr.io/r/graphics/abline.html">abline</a></span>(<span class="fl">0</span>, <span class="fl">1</span>)
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>((<span class="no">l1</span>-<span class="no">l2</span>)/<span class="no">l1</span>)</pre></body></html></div>
</div>
<div id="distances" class="section level2">
<h2 class="hasAnchor">
<a href="#distances" class="anchor"></a>Distances</h2>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="no">d1</span> <span class="kw">=</span> <span class="fu"><a href="../reference/geos_measures.html">st_distance</a></span>(<span class="no">nc</span>, <span class="no">nc</span>[<span class="fl">1</span>:<span class="fl">10</span>,])
<span class="no">d2</span> <span class="kw">=</span> <span class="fu"><a href="../reference/geos_measures.html">st_distance</a></span>(<span class="no">nc</span>, <span class="no">nc</span>[<span class="fl">1</span>:<span class="fl">10</span>,], <span class="kw">use_lwgeom</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span>(<span class="no">d1</span>)
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span>(<span class="no">d2</span>)
<span class="fu"><a href="../reference/plot.html">plot</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/vector.html">as.vector</a></span>(<span class="no">d1</span>), <span class="fu"><a href="https://rdrr.io/r/base/vector.html">as.vector</a></span>(<span class="no">d2</span>))
<span class="fu"><a href="https://rdrr.io/r/graphics/abline.html">abline</a></span>(<span class="fl">0</span>, <span class="fl">1</span>)
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/vector.html">as.vector</a></span>(<span class="no">d1</span>)-<span class="fu"><a href="https://rdrr.io/r/base/vector.html">as.vector</a></span>(<span class="no">d2</span>))</pre></body></html></div>
</div>
</div>
<div id="predicates" class="section level1">
<h1 class="hasAnchor">
<a href="#predicates" class="anchor"></a>Predicates</h1>
</div>
<div id="transformations" class="section level1">
<h1 class="hasAnchor">
<a href="#transformations" class="anchor"></a>Transformations</h1>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<ul>
<li>Dewey Dunnington, Edzer Pebesma and Ege Rubak, 2020. s2: Spherical Geometry Operators Using the S2 Geometry Library. <a href="https://r-spatial.github.io/s2/" class="uri">https://r-spatial.github.io/s2/</a>, <a href="https://github.com/r-spatial/s2" class="uri">https://github.com/r-spatial/s2</a>
</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Edzer Pebesma.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
